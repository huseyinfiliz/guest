{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@huseyinfiliz/guest/webpack/bootstrap","webpack://@huseyinfiliz/guest/webpack/runtime/compat get default export","webpack://@huseyinfiliz/guest/webpack/runtime/define property getters","webpack://@huseyinfiliz/guest/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/guest/external root \"flarum.core.compat['forum/app']\"","webpack://@huseyinfiliz/guest/external root \"flarum.core.compat['components/LogInButtons']\"","webpack://@huseyinfiliz/guest/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/guest/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@huseyinfiliz/guest/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@huseyinfiliz/guest/external root \"flarum.core.compat['common/components/Button']\"","webpack://@huseyinfiliz/guest/./src/forum/components/GuestLoginButton.js","webpack://@huseyinfiliz/guest/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@huseyinfiliz/guest/./src/forum/modals/GuestModal.js","webpack://@huseyinfiliz/guest/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LogInButtons'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\n\nexport default class GuestLoginButton extends Button {\n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    this.usernamePrefix = this.attrs.usernamePrefix || 'Guest';\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    \n    $(vnode.dom).on('click', (e) => {\n      e.preventDefault();\n      this.handleGuestLogin();\n    });\n  }\n\n  handleGuestLogin() {\n    this.loading = true;\n    m.redraw();\n    \n    app.request({\n      method: 'POST',\n      url: '/api/guest',\n      data: {}\n    }).then(response => {\n      app.session.user = response;\n      localStorage.setItem('guestJustLoggedIn', 'true');\n      window.location.reload();\n    }).catch(error => {\n      console.error('Guest login error:', error);\n      this.loading = false;\n      m.redraw();\n    });\n  }\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\n\nexport default class GuestModal extends Modal {\n  className() {\n    return 'GuestModal Modal--small';\n  }\n\n  title() {\n    return [\n      m('i', { className: 'fas fa-user-secret' }),\n      ' ',\n      app.translator.trans('huseyinfiliz-guest.forum.modal_title')\n    ];\n  }\n\n  content() {\n    return m('div', { className: 'Modal-body' }, [\n      m('p', { className: 'text-center' }, \n        app.translator.trans('huseyinfiliz-guest.forum.welcome_message')\n      ),\n      m(Button, {\n        className: 'Button Button--primary Button--block',\n        onclick: () => this.hide()\n      }, app.translator.trans('huseyinfiliz-guest.forum.modal_understood'))\n    ]);\n  }\n\n  static isDismissible = true;\n}","import app from 'flarum/forum/app';\nimport LogInButtons from 'flarum/components/LogInButtons';\nimport { extend } from 'flarum/common/extend';\nimport GuestLoginButton from './components/GuestLoginButton';\nimport GuestModal from './modals/GuestModal';\n\napp.initializers.add('huseyinfiliz-guest', () => {\n  // Add guest login button\n  extend(LogInButtons.prototype, 'items', function (items) {\n    if (app.session && app.session.user) return;\n\n    const usernamePrefix = app.forum.attribute('huseyinfiliz-guest.username') || 'Guest';\n    \n    items.add(\n      'guest',\n      m(\n        GuestLoginButton,\n        {\n          className: 'Button GuestLogin',\n          usernamePrefix\n        },\n        [\n          m('i', { className: 'fas fa-user-secret' }),\n          ' ',\n          app.translator.trans('huseyinfiliz-guest.forum.login_button')\n        ]\n      ),\n      -10\n    );\n  });\n\n  // Check for guest modal after app is ready\n  extend(app, 'mount', () => {\n    // Make sure session exists\n    if (!app.session || !app.session.user) return;\n    \n    const justLoggedIn = localStorage.getItem('guestJustLoggedIn');\n    if (justLoggedIn !== 'true') return;\n    \n    const prefix = app.forum.attribute('huseyinfiliz-guest.username') || 'Guest';\n    const username = app.session.user.username();\n    const regex = new RegExp(`^${prefix}\\\\d{4}$`);\n    \n    if (regex.test(username)) {\n      localStorage.removeItem('guestJustLoggedIn');\n      \n      setTimeout(() => {\n        app.modal.show(GuestModal);\n      }, 500);\n    }\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","GuestLoginButton","_Button","apply","arguments","_proto","oninit","vnode","this","usernamePrefix","attrs","oncreate","_this","$","dom","on","preventDefault","handleGuestLogin","_this2","loading","m","redraw","app","method","url","data","then","response","user","localStorage","setItem","window","location","reload","error","console","Button","GuestModal","_Modal","className","title","trans","content","onclick","hide","Modal","isDismissible","add","extend","LogInButtons","items","attribute","getItem","prefix","username","RegExp","test","removeItem","setTimeout","show"],"sourceRoot":""}